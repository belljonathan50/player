<!doctype html>
<html>
<head>
    <script src="/timesync/timesync.js"></script> 
    <script src="/libs/send.js"></script> 
    <script src="/libs/sync_instance.js"></script> 
    <script src="/libs/sync_forward.js"></script> 
</head>

<body>
    <script>
        // init
        window.GlobalLag= 200;
    </script>

<button type="button" onclick="ws.send('play');">play</button>

<button type="button" onclick="ws.send('seek');">seek</button>




      <form>
        <label for="vol">lag (between 0 and 1111ms)</label>
        <input type="range" id="lag" name="lag"  min="0" max="1111" value="200" style="color:rgb(0, 251, 21); width:400px;" oninput="
        var lagval = this.value;
        window.GlobalLag= lagval;
        this.nextElementSibling.value = 'Lag is: '+ lagval+' ms';      
        ">
        <output>200 ms </output>
      </form>

<br>

<!-- seek value -->
      <form>
        <label for="vol">seek: (between 0 and 300s)</label>
        <input type="range" id="seek" name="sik"  min="0" max="300" value="3" style="color:rgb(0, 251, 21); width:400px;" oninput="
        var seekval = this.value;

        var NowHere = new Date(ts.now());
  var NowNum = NowHere.getTime()
  console.log(`here:  `+NowNum);
  futuredate =   parseInt(GlobalLag)  + parseInt(NowNum);
  console.log(`later: `+futuredate);

  console.log('send seek '+ seekval + ' at: '+ futuredate);
  ws.send('send seek '+ seekval + ' at: '+ futuredate);

        var mins = ~~((seekval % 1800) / 60);
        var secs = ~~seekval % 60;
        this.nextElementSibling.value =  'send seek: '+      mins + ' mins ' + secs    + ' at: '+ futuredate ;
        ">
        <output>0 mins 00</output>

        <br><br>
    </form>


<!-- playback rate?
<form>
            <label for="vol">playback-speed</label>
            <input type="range" id="vol" name="sik" value="1" min="0.5" max="4" step="0.1" style="color:rgb(0, 251, 21); width:1200px;" 
            oninput=
            "
            var rate = 'rate '+ this.value;


            var NowHere = new Date(ts.now());
  var NowNum = NowHere.getTime()
  console.log(`here:  `+NowNum);
  futuredate =   parseInt(GlobalLag)  + parseInt(NowNum);
  console.log(`later: `+futuredate);

  console.log('send seek '+ seekval + ' at: '+ futuredate);
  ws.send('send seek '+ seekval + ' at: '+ futuredate);

        var mins = ~~((seekval % 1800) / 60);
        var secs = ~~seekval % 60;
        this.nextElementSibling.value =  'send seek: '+      mins + ' mins ' + secs    + ' at: '+ futuredate ;
 
            console.log(rate);
            this.nextElementSibling.value =  ' Rate =  ' + this.value  ;
           ws.send('rate '+value);
            ">
            <output> Rate = 1</output>
         
</form> -->


</body>
</html>
